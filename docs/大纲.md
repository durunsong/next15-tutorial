### CNAåˆ›å»ºé¡¹ç›®å·¥ç¨‹

```pnpm
node  -v
// åŸå§‹åˆ›å»ºæ–¹å¼
npx create-next-app@latest
// pnpm æ–¹å¼
pnpm dlx create-next-app@latest

// ä¸€æ­¥åˆ°ä½æ–¹å¼ npx/pnpm/.....
npx create-next-app@latest xxxxx --typescript --tailwind --eslint --app --src-dir --turbopack --import-alias "@/*"  --use-pnpm

// æ³¨é‡Šä»£ç 
layout.tsx -- geistSans/geistMono  ç›¸å…³çš„ä»£ç 
æ³¨é‡Šä»£ç åŸå› ï¼šå› ä¸ºå¦‚æœæˆ‘ä»¬ç½‘ç»œåœ¨å›½å†…ï¼Œè¿™äº›å­—ä½“æ¥è‡ªäºgoogleï¼Œæˆ‘ä»¬åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒè®¿é—®googleå°†ä¼šå—é™ï¼Œæ‰€æœ‰æ³¨é‡Š

// pnpm start ä¸ pnpm dev
```

### æ–‡ä»¶ç³»ç»Ÿè·¯ç”±

æ–‡ä»¶åœ°å€æ˜ å°„æµè§ˆå™¨è®¿é—®åœ°å€
è·¯ç”±/åŠ¨æ€è·¯ç”±[id]

### Client Component å’Œ Server Component

#### ğŸ” åŸºæœ¬æ¦‚å¿µå’Œå·¥ä½œåŸç†

**Server Component (æœåŠ¡å™¨ç»„ä»¶)**

- åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ŒHTMLç›´æ¥å‘é€åˆ°æµè§ˆå™¨
- ä¸åŒ…å«å®¢æˆ·ç«¯JavaScripté€»è¾‘
- å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰æœåŠ¡å™¨èµ„æº
- é»˜è®¤æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯Server Component

**Client Component (å®¢æˆ·ç«¯ç»„ä»¶)**

- éœ€è¦æ˜¾å¼å£°æ˜ `'use client';`
- åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“å’Œäº¤äº’
- å¯ä»¥ä½¿ç”¨React Hooks (useState, useEffectç­‰)
- å¯ä»¥è®¿é—®æµè§ˆå™¨API (window, documentç­‰)

#### ğŸš€ ä¸ºä»€ä¹ˆServer Componentæ›´å¿«ï¼Ÿ

1. **å‡å°‘JavaScriptåŒ…å¤§å°** - æœåŠ¡å™¨ç»„ä»¶ä¸ä¼šæ‰“åŒ…åˆ°å®¢æˆ·ç«¯
2. **æ›´å¿«çš„é¦–å±æ¸²æŸ“** - HTMLç›´æ¥ä»æœåŠ¡å™¨è¿”å›ï¼Œæ— éœ€ç­‰å¾…JSæ‰§è¡Œ
3. **æ›´å¥½çš„SEO** - æœç´¢å¼•æ“å¯ä»¥ç›´æ¥ç´¢å¼•æœåŠ¡å™¨æ¸²æŸ“çš„å†…å®¹
4. **å‡å°‘ç½‘ç»œè¯·æ±‚** - æ•°æ®åœ¨æœåŠ¡å™¨ç«¯è·å–ï¼Œé¿å…å®¢æˆ·ç«¯APIè°ƒç”¨
5. **è‡ªåŠ¨ä»£ç åˆ†å‰²** - åªæœ‰éœ€è¦çš„å®¢æˆ·ç«¯ä»£ç æ‰ä¼šå‘é€åˆ°æµè§ˆå™¨

#### ğŸ“ æ¸²æŸ“æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§           | Server Component | Client Component |
| -------------- | ---------------- | ---------------- |
| æ¸²æŸ“ä½ç½®       | æœåŠ¡å™¨           | æµè§ˆå™¨           |
| äº¤äº’æ€§         | æ—                | æœ‰               |
| Hooksæ”¯æŒ      | âŒ               | âœ…               |
| æµè§ˆå™¨API      | âŒ               | âœ…               |
| æœåŠ¡å™¨èµ„æºè®¿é—® | âœ…               | âŒ               |
| Bundleå¤§å°     | 0                | è®¡å…¥bundle       |
| é¦–å±é€Ÿåº¦       | å¿«               | ç›¸å¯¹æ…¢           |

#### ğŸŒ Blogæ¡ˆä¾‹å¯¹æ¯”

**è®¿é—®è·¯å¾„**: `http://localhost:3000/blog/[id]`

**Server Component ç¤ºä¾‹ (æ¨èç”¨äºæ•°æ®å±•ç¤º)**

```tsx
// app/blog/[id]/page.tsx - Server Component
interface BlogPost {
  id: string;
  title: string;
  content: string;
  author: string;
  publishedAt: string;
}

// ç›´æ¥åœ¨æœåŠ¡å™¨è·å–æ•°æ®
async function getBlogPost(id: string): Promise<BlogPost> {
  // æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢ - åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ
  const response = await fetch(`${process.env.API_URL}/posts/${id}`, {
    cache: 'force-cache', // æœåŠ¡å™¨ç«¯ç¼“å­˜
  });
  return response.json();
}

// æœåŠ¡å™¨ç»„ä»¶ - é»˜è®¤è¡Œä¸ºï¼Œæ— éœ€ 'use client'
export default async function BlogPage({ params }: { params: { id: string } }) {
  // æœåŠ¡å™¨ç«¯æ•°æ®è·å–
  const post = await getBlogPost(params.id);

  return (
    <article className="max-w-4xl mx-auto p-6">
      <h1 className="text-3xl font-bold mb-4">{post.title}</h1>
      <div className="text-gray-600 mb-6">
        ä½œè€…: {post.author} | å‘å¸ƒæ—¶é—´: {post.publishedAt}
      </div>
      <div className="prose max-w-none">{post.content}</div>
    </article>
  );
}
```

**Client Component ç¤ºä¾‹ (ç”¨äºäº¤äº’åŠŸèƒ½)**

```tsx
// components/BlogInteractions.tsx - Client Component
'use client';

// å¿…é¡»å£°æ˜
import { useEffect, useState } from 'react';

// components/BlogInteractions.tsx - Client Component

// components/BlogInteractions.tsx - Client Component

// components/BlogInteractions.tsx - Client Component

// components/BlogInteractions.tsx - Client Component

// components/BlogInteractions.tsx - Client Component

interface BlogInteractionsProps {
  postId: string;
}

export default function BlogInteractions({ postId }: BlogInteractionsProps) {
  const [likes, setLikes] = useState(0);
  const [comments, setComments] = useState([]);
  const [isLiked, setIsLiked] = useState(false);

  // å®¢æˆ·ç«¯æ•°æ®è·å–
  useEffect(() => {
    fetch(`/api/blog/${postId}/stats`)
      .then(res => res.json())
      .then(data => {
        setLikes(data.likes);
        setComments(data.comments);
      });
  }, [postId]);

  const handleLike = async () => {
    setIsLiked(!isLiked);
    setLikes(prev => (isLiked ? prev - 1 : prev + 1));

    await fetch(`/api/blog/${postId}/like`, {
      method: 'POST',
      body: JSON.stringify({ action: isLiked ? 'unlike' : 'like' }),
    });
  };

  return (
    <div className="mt-8 border-t pt-6">
      {/* ç‚¹èµåŠŸèƒ½ */}
      <button
        onClick={handleLike}
        className={`flex items-center gap-2 px-4 py-2 rounded ${
          isLiked ? 'bg-red-500 text-white' : 'bg-gray-100'
        }`}
      >
        â¤ï¸ {likes} ç‚¹èµ
      </button>

      {/* è¯„è®ºåŒºåŸŸ */}
      <div className="mt-6">
        <h3 className="text-xl font-semibold mb-4">è¯„è®º ({comments.length})</h3>
        {/* è¯„è®ºåˆ—è¡¨å’Œè¾“å…¥æ¡† */}
      </div>
    </div>
  );
}
```

#### ğŸ—ï¸ æ··åˆä½¿ç”¨æ¨¡å¼

```tsx
// app/blog/[id]/page.tsx - å®Œæ•´ç¤ºä¾‹
import BlogInteractions from '@/components/BlogInteractions';

// Server Component (ä¸»ä½“)
export default async function BlogPage({ params }: { params: { id: string } }) {
  // æœåŠ¡å™¨ç«¯æ•°æ®è·å– - å¿«é€Ÿé¦–å±æ¸²æŸ“
  const post = await getBlogPost(params.id);

  return (
    <div className="max-w-4xl mx-auto p-6">
      {/* æœåŠ¡å™¨æ¸²æŸ“çš„é™æ€å†…å®¹ */}
      <article>
        <h1 className="text-3xl font-bold mb-4">{post.title}</h1>
        <div className="text-gray-600 mb-6">
          ä½œè€…: {post.author} | å‘å¸ƒæ—¶é—´: {post.publishedAt}
        </div>
        <div className="prose max-w-none">{post.content}</div>
      </article>

      {/* å®¢æˆ·ç«¯ç»„ä»¶ - å¤„ç†äº¤äº’ */}
      <BlogInteractions postId={params.id} />
    </div>
  );
}
```

#### ğŸ’¡ æœ€ä½³å®è·µ

1. **é»˜è®¤ä½¿ç”¨Server Component** - é™¤ééœ€è¦äº¤äº’åŠŸèƒ½
2. **æ•°æ®è·å–åœ¨Server Component** - åˆ©ç”¨æœåŠ¡å™¨ç«¯æ€§èƒ½
3. **äº¤äº’åŠŸèƒ½ç”¨Client Component** - è¡¨å•ã€æŒ‰é’®ã€åŠ¨ç”»ç­‰
4. **ç»„ä»¶è¾¹ç•Œæ¸…æ™°** - Serverå’ŒClientç»„ä»¶èŒè´£åˆ†æ˜
5. **æ··åˆä½¿ç”¨** - Server ComponentåŒ…å«Client Component

### hooks

åªèƒ½åœ¨client componentä¸­ä½¿ç”¨ï¼Œå¦‚ï¼šuseState....

æ¡ˆä¾‹ï¼šuseParams

# Resendé‚®ä»¶

### Route Handlers and Middleware
